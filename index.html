<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Atomix EOD Reporting</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @keyframes gradient {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    @keyframes float {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-20px); }
    }
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    @keyframes scaleIn {
      from {
        opacity: 0;
        transform: scale(0.9);
      }
      to {
        opacity: 1;
        transform: scale(1);
      }
    }
    .gradient-bg {
      background: linear-gradient(-45deg, #0D2D53, #1a4d7a, #0D2D53, #164a6e);
      background-size: 400% 400%;
      animation: gradient 15s ease infinite;
    }
    .floating {
      animation: float 6s ease-in-out infinite;
    }
    .fade-in-up {
      animation: fadeInUp 0.8s ease-out forwards;
    }
    .scale-in {
      animation: scaleIn 0.5s ease-out forwards;
    }
    .glass {
      background: rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
    .glow {
      box-shadow: 0 0 30px rgba(163, 243, 197, 0.3);
    }
    .input-focus:focus {
      outline: none;
      box-shadow: 0 0 0 3px rgba(163, 243, 197, 0.3);
      border-color: #A3F3C5;
    }
    /* Grid pattern background */
    .grid-bg {
      background-image: 
        linear-gradient(rgba(163, 243, 197, 0.03) 1px, transparent 1px),
        linear-gradient(90deg, rgba(163, 243, 197, 0.03) 1px, transparent 1px);
      background-size: 50px 50px;
    }
  </style>
</head>
<body class="bg-[#101314] text-[#EDEFED] overflow-x-hidden">
  <div id="app"></div>

  <script>
    const QUESTION_SETS = {
      'Outbound 1st': [
        { key: 'headcount', label: 'Headcount', type: 'number', required: true },
        { key: 'callins_count', label: 'How many call-ins?', type: 'number', required: true },
        { key: 'callins_who', label: 'Who called in?', type: 'text', required: false },
        { key: 'issues', label: 'What issues do we have?', type: 'textarea', required: false },
        { key: 'wins', label: 'What wins did we have?', type: 'textarea', required: false },
        { key: 'orders_shipped', label: 'How many orders did we ship?', type: 'number', required: true },
        { key: 'out_of_sla', label: 'Anything out of SLA?', type: 'yesno', required: true },
        { key: 'out_of_sla_details', label: 'SLA Details', type: 'textarea', required: false, showIf: { key: 'out_of_sla', value: 'yes' } }
      ],
      'Outbound 2nd': [
        { key: 'headcount', label: 'Headcount', type: 'number', required: true },
        { key: 'callins_count', label: 'How many call-ins?', type: 'number', required: true },
        { key: 'callins_who', label: 'Who called in?', type: 'text', required: false },
        { key: 'issues', label: 'What issues do we have?', type: 'textarea', required: false },
        { key: 'wins', label: 'What wins did we have?', type: 'textarea', required: false },
        { key: 'orders_shipped', label: 'How many orders did we ship?', type: 'number', required: true },
        { key: 'out_of_sla', label: 'Anything out of SLA?', type: 'yesno', required: true },
        { key: 'out_of_sla_details', label: 'SLA Details', type: 'textarea', required: false, showIf: { key: 'out_of_sla', value: 'yes' } },
        { key: 'all_carriers_picked_up', label: 'Did all carriers pick up?', type: 'yesno', required: true },
        { key: 'carrier_details', label: 'Carrier Details', type: 'textarea', required: false, showIf: { key: 'all_carriers_picked_up', value: 'no' } }
      ],
      'Inventory': [
        { key: 'headcount', label: 'Headcount', type: 'number', required: true },
        { key: 'callins_count', label: 'How many call-ins?', type: 'number', required: true },
        { key: 'callins_who', label: 'Who called in?', type: 'text', required: false },
        { key: 'issues', label: 'What issues do we have?', type: 'textarea', required: false },
        { key: 'wins', label: 'What wins did we have?', type: 'textarea', required: false }
      ],
      'Inbound': [
        { key: 'headcount', label: 'Headcount', type: 'number', required: true },
        { key: 'callins_count', label: 'How many call-ins?', type: 'number', required: true },
        { key: 'callins_who', label: 'Who called in?', type: 'text', required: false },
        { key: 'issues', label: 'What issues do we have?', type: 'textarea', required: false },
        { key: 'wins', label: 'What wins did we have?', type: 'textarea', required: false },
        { key: 'inbounds_today', label: 'How many inbounds today?', type: 'number', required: true },
        { key: 'out_of_sla', label: 'Anything out of SLA?', type: 'yesno', required: true },
        { key: 'out_of_sla_details', label: 'SLA Details', type: 'textarea', required: false, showIf: { key: 'out_of_sla', value: 'yes' } },
        { key: 'returns_today', label: 'How many returns today?', type: 'number', required: true }
      ],
      'Special Projects': [
        { key: 'headcount', label: 'Headcount', type: 'number', required: true },
        { key: 'callins_count', label: 'How many call-ins?', type: 'number', required: true },
        { key: 'callins_who', label: 'Who called in?', type: 'text', required: false },
        { key: 'issues', label: 'What issues do we have?', type: 'textarea', required: false },
        { key: 'wins', label: 'What wins did we have?', type: 'textarea', required: false },
        { key: 'projects_completed', label: 'How many projects completed?', type: 'number', required: true },
        { key: 'b2b_retail_orders_shipped', label: 'How many B2B/Retail orders shipped?', type: 'number', required: true },
        { key: 'kits_completed', label: 'How many kits complete?', type: 'number', required: true },
        { key: 'errors_reported', label: 'How many errors reported?', type: 'number', required: true }
      ],
      'Dedicated Inventory': [
        { key: 'headcount', label: 'Headcount', type: 'number', required: true },
        { key: 'callins_count', label: 'How many call-ins?', type: 'number', required: true },
        { key: 'callins_who', label: 'Who called in?', type: 'text', required: false },
        { key: 'issues', label: 'What issues do we have?', type: 'textarea', required: false },
        { key: 'wins', label: 'What wins did we have?', type: 'textarea', required: false },
        { key: 'pallets_moved', label: 'How many pallets were moved today?', type: 'number', required: true },
        { key: 'skus_counted', label: 'How many SKUs were counted today?', type: 'number', required: true },
        { key: 'dedicated_issues', label: 'Any issues?', type: 'textarea', required: false }
      ]
    };

    let state = {
      stage: 'hero',
      name: '',
      reportDate: new Date().toISOString().split('T')[0],
      department: '',
      formData: {},
      isSubmitting: false,
      error: ''
    };

    function triggerExplosion() {
      const canvas = document.createElement('canvas');
      canvas.style.position = 'fixed';
      canvas.style.top = '0';
      canvas.style.left = '0';
      canvas.style.width = '100%';
      canvas.style.height = '100%';
      canvas.style.pointerEvents = 'none';
      canvas.style.zIndex = '9999';
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
      document.body.appendChild(canvas);

      const ctx = canvas.getContext('2d');
      const particles = [];
      const colors = ['#A3F3C5', '#0D2D53', '#EDEFED'];

      for (let i = 0; i < 150; i++) {
        particles.push({
          x: window.innerWidth / 2,
          y: window.innerHeight * 0.5,
          vx: (Math.random() - 0.5) * 15,
          vy: (Math.random() - 0.5) * 15 - 5,
          color: colors[Math.floor(Math.random() * colors.length)],
          size: Math.random() * 6 + 2,
          life: 1
        });
      }

      const animate = () => {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        
        particles.forEach((p) => {
          p.x += p.vx;
          p.y += p.vy;
          p.vy += 0.3;
          p.life -= 0.012;
          
          if (p.life > 0) {
            ctx.globalAlpha = p.life;
            ctx.fillStyle = p.color;
            ctx.beginPath();
            ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
            ctx.fill();
          }
        });

        if (particles.some(p => p.life > 0)) {
          requestAnimationFrame(animate);
        } else {
          document.body.removeChild(canvas);
        }
      };

      animate();
    }

    function handleDepartmentSelect(dept) {
      state.department = dept;
      triggerExplosion();
      setTimeout(() => {
        state.stage = 'questions';
        state.formData = {};
        render();
      }, 600);
    }

    function isFormValid() {
      const questions = QUESTION_SETS[state.department] || [];
      return questions.every(q => {
        if (!q.required) return true;
        if (q.showIf) {
          const conditionMet = state.formData[q.showIf.key] === q.showIf.value;
          if (!conditionMet) return true;
        }
        const value = state.formData[q.key];
        return value !== undefined && value !== '' && value !== null;
      });
    }

    async function handleSubmit() {
      state.isSubmitting = true;
      state.error = '';
      render();
      
      const submitData = {
        timestamp: new Date().toISOString(),
        name: state.name,
        report_date: state.reportDate,
        department: state.department,
        ...state.formData
      };

      try {
        const SCRIPT_URL = 'YOUR_GOOGLE_APPS_SCRIPT_URL_HERE';
        
        await fetch(SCRIPT_URL, {
          method: 'POST',
          mode: 'no-cors',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(submitData)
        });

        state.stage = 'success';
        triggerExplosion();
        render();
      } catch (err) {
        state.error = 'Failed to submit report. Please try again.';
        console.error(err);
        state.isSubmitting = false;
        render();
      }
    }

    function resetForm() {
      state = {
        stage: 'namedate',
        name: '',
        reportDate: new Date().toISOString().split('T')[0],
        department: '',
        formData: {},
        isSubmitting: false,
        error: ''
      };
      render();
    }

    function renderField(question) {
      if (question.showIf) {
        const conditionMet = state.formData[question.showIf.key] === question.showIf.value;
        if (!conditionMet) return '';
      }

      const value = state.formData[question.key] || '';
      const baseClass = "w-full bg-[#1a1d1e] border border-[#2a2d2e] rounded-xl px-5 py-4 text-[#EDEFED] input-focus transition-all";

      switch (question.type) {
        case 'number':
          return `<input type="number" id="${question.key}" value="${value}" class="${baseClass}" ${question.required ? 'required' : ''}>`;
        case 'text':
          return `<input type="text" id="${question.key}" value="${value}" class="${baseClass}" ${question.required ? 'required' : ''}>`;
        case 'textarea':
          return `<textarea id="${question.key}" rows="4" class="${baseClass} resize-none" ${question.required ? 'required' : ''}>${value}</textarea>`;
        case 'yesno':
          return `
            <div class="flex gap-4">
              <button type="button" onclick="state.formData['${question.key}'] = 'yes'; render();" class="flex-1 py-4 rounded-xl border-2 transition-all font-medium ${value === 'yes' ? 'bg-[#A3F3C5] text-[#101314] border-[#A3F3C5] glow' : 'bg-transparent text-[#EDEFED] border-[#2a2d2e] hover:border-[#A3F3C5]'}">Yes</button>
              <button type="button" onclick="state.formData['${question.key}'] = 'no'; render();" class="flex-1 py-4 rounded-xl border-2 transition-all font-medium ${value === 'no' ? 'bg-[#A3F3C5] text-[#101314] border-[#A3F3C5] glow' : 'bg-transparent text-[#EDEFED] border-[#2a2d2e] hover:border-[#A3F3C5]'}">No</button>
            </div>
          `;
        default:
          return '';
      }
    }

    function setupInputListeners() {
      const questions = QUESTION_SETS[state.department] || [];
      questions.forEach(q => {
        const el = document.getElementById(q.key);
        if (el && q.type !== 'yesno') {
          el.addEventListener('input', (e) => {
            state.formData[q.key] = e.target.value;
            const submitBtn = document.getElementById('submit-btn');
            if (submitBtn) {
              submitBtn.disabled = !isFormValid();
            }
          });
        }
      });
    }

    function render() {
      const app = document.getElementById('app');
      let content = '';

      if (state.stage === 'hero') {
        content = `
          <div class="min-h-screen gradient-bg grid-bg relative overflow-hidden">
            <!-- Animated circles -->
            <div class="absolute top-20 left-10 w-72 h-72 bg-[#A3F3C5] opacity-10 rounded-full blur-3xl floating"></div>
            <div class="absolute bottom-20 right-10 w-96 h-96 bg-[#A3F3C5] opacity-10 rounded-full blur-3xl floating" style="animation-delay: -3s;"></div>
            
            <div class="relative z-10 flex items-center justify-center min-h-screen px-6">
              <div class="max-w-5xl w-full text-center fade-in-up">
                <!-- Logo -->
                <div class="flex justify-center mb-8">
                  <div class="glass rounded-2xl p-4 glow">
                    <svg width="64" height="64" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <circle cx="24" cy="24" r="22" stroke="#A3F3C5" stroke-width="2" fill="none"/>
                      <path d="M24 14L32 19V29L24 34L16 29V19L24 14Z" stroke="#A3F3C5" stroke-width="2" fill="none" stroke-linejoin="bevel"/>
                      <path d="M24 14V24M24 24L32 19M24 24L16 19M24 24V34" stroke="#A3F3C5" stroke-width="2"/>
                    </svg>
                  </div>
                </div>
                
                <div class="inline-block px-6 py-2 glass rounded-full text-[#A3F3C5] text-sm font-medium tracking-widest uppercase mb-8 glow">
                  Operations Reporting Platform
                </div>
                
                <h1 class="text-7xl md:text-8xl lg:text-9xl font-extralight leading-none tracking-tight mb-8 bg-gradient-to-r from-white to-[#A3F3C5] bg-clip-text text-transparent">
                  End of Day<br/>Reporting
                </h1>
                
                <p class="text-2xl text-[#9D9F9E] max-w-3xl mx-auto mb-12 font-light leading-relaxed">
                  "When performance is measured, performance improves. When performance is measured and reported, the rate of improvement accelerates."
                </p>
                
                <button onclick="state.stage = 'namedate'; render();" class="group relative bg-[#A3F3C5] text-[#101314] px-12 py-5 rounded-2xl text-xl font-medium hover:bg-[#8de0ad] transition-all glow hover:scale-105 transform">
                  <span class="relative z-10">Start Your Report</span>
                  <div class="absolute inset-0 bg-white opacity-0 group-hover:opacity-20 rounded-2xl transition-opacity"></div>
                </button>
              </div>
            </div>
          </div>
        `;
      } else if (state.stage === 'namedate') {
        content = `
          <div class="min-h-screen gradient-bg grid-bg flex items-center justify-center px-6 py-20">
            <div class="max-w-xl w-full">
              <div class="glass rounded-3xl p-10 scale-in glow">
                <h2 class="text-5xl font-light mb-12 text-center bg-gradient-to-r from-white to-[#A3F3C5] bg-clip-text text-transparent">Let's Begin</h2>
                
                <div class="space-y-8">
                  <div class="space-y-3">
                    <label class="block text-sm font-medium text-[#9D9F9E] uppercase tracking-wide">Your Name</label>
                    <input type="text" id="name-input" value="${state.name}" class="w-full bg-[#1a1d1e] border border-[#2a2d2e] rounded-xl px-5 py-4 text-[#EDEFED] text-lg input-focus transition-all" placeholder="Enter your name">
                  </div>
                  
                  <div class="space-y-3">
                    <label class="block text-sm font-medium text-[#9D9F9E] uppercase tracking-wide">Report Date</label>
                    <input type="date" id="date-input" value="${state.reportDate}" class="w-full bg-[#1a1d1e] border border-[#2a2d2e] rounded-xl px-5 py-4 text-[#EDEFED] text-lg input-focus transition-all">
                  </div>
                  
                  <button id="continue-btn" class="w-full bg-[#A3F3C5] text-[#101314] py-5 rounded-xl font-semibold text-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-[#8de0ad] transition-all glow hover:scale-105 transform mt-10">
                    Continue →
                  </button>
                </div>
              </div>
            </div>
          </div>
        `;
      } else if (state.stage === 'department') {
        content = `
          <div class="min-h-screen gradient-bg grid-bg px-6 py-20">
            <div class="max-w-3xl mx-auto">
              <div class="text-center mb-16 fade-in-up">
                <h2 class="text-6xl font-light mb-4 bg-gradient-to-r from-white to-[#A3F3C5] bg-clip-text text-transparent">Select Department</h2>
                <p class="text-[#9D9F9E] text-lg">Choose your department to continue</p>
              </div>
              
              <div class="grid grid-cols-1 md:grid-cols-2 gap-4 scale-in">
                ${Object.keys(QUESTION_SETS).map((dept, i) => `
                  <button onclick="handleDepartmentSelect('${dept}')" class="glass rounded-2xl px-8 py-8 text-left hover:border-[#A3F3C5] hover:bg-[#1e2223] transition-all group glow-on-hover transform hover:scale-105" style="animation-delay: ${i * 0.1}s;">
                    <span class="text-xl font-light group-hover:text-[#A3F3C5] transition-colors block">${dept}</span>
                    <div class="mt-2 text-[#9D9F9E] text-sm opacity-0 group-hover:opacity-100 transition-opacity">Click to submit report →</div>
                  </button>
                `).join('')}
              </div>
            </div>
          </div>
        `;
      } else if (state.stage === 'questions') {
        const questions = QUESTION_SETS[state.department] || [];
        content = `
          <div class="min-h-screen gradient-bg grid-bg px-6 py-20">
            <div class="max-w-4xl mx-auto">
              <div class="flex items-center justify-between mb-16 fade-in-up">
                <div>
                  <div class="inline-block px-4 py-1 glass rounded-full text-[#A3F3C5] text-xs font-medium tracking-wider uppercase mb-3">
                    ${state.department}
                  </div>
                  <h2 class="text-5xl font-light bg-gradient-to-r from-white to-[#A3F3C5] bg-clip-text text-transparent">Daily Report</h2>
                </div>
                <button onclick="state.stage = 'department'; render();" class="text-[#9D9F9E] hover:text-[#A3F3C5] text-sm transition-colors px-4 py-2 glass rounded-lg">
                  ← Change Department
                </button>
              </div>
              
              <div class="glass rounded-3xl p-10 scale-in">
                <div class="space-y-8">
                  ${questions.map(q => `
                    <div class="space-y-3">
                      <label class="block text-sm font-medium text-[#9D9F9E] uppercase tracking-wide">
                        ${q.label}
                        ${q.required ? '<span class="text-[#A3F3C5] ml-1">*</span>' : ''}
                      </label>
                      ${renderField(q)}
                    </div>
                  `).join('')}
                  
                  ${state.error ? `<div class="bg-red-900/20 border border-red-500 text-red-400 px-5 py-4 rounded-xl">${state.error}</div>` : ''}
                  
                  <button id="submit-btn" onclick="handleSubmit()" class="w-full bg-[#A3F3C5] text-[#101314] py-5 rounded-xl font-semibold text-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-[#8de0ad] transition-all glow hover:scale-105 transform mt-10">
                    ${state.isSubmitting ? 'Submitting...' : 'Submit Report'}
                  </button>
                </div>
              </div>
            </div>
          </div>
        `;
      } else if (state.stage === 'success') {
        content = `
          <div class="min-h-screen gradient-bg grid-bg flex items-center justify-center px-6">
            <div class="max-w-2xl w-full text-center scale-in">
              <div class="glass rounded-3xl p-16 glow">
                <div class="w-28 h-28 bg-[#A3F3C5] rounded-full mx-auto flex items-center justify-center mb-8 glow">
                  <svg class="w-14 h-14 text-[#101314]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7" />
                  </svg>
                </div>
                
                <h2 class="text-5xl font-light mb-6 bg-gradient-to-r from-white to-[#A3F3C5] bg-clip-text text-transparent">Report Submitted!</h2>
                <p class="text-[#9D9F9E] text-xl mb-4 font-light">
                  Your ${state.department} report for ${new Date(state.reportDate).toLocaleDateString()} has been submitted successfully.
                </p>
                <p class="text-[#9D9F9E] text-sm mb-12">
                  Thank you for keeping operations running smoothly.
                </p>
                
                <button onclick="resetForm()" class="bg-[#A3F3C5] text-[#101314] px-10 py-4 rounded-xl font-semibold hover:bg-[#8de0ad] transition-all glow hover:scale-105 transform">
                  Submit Another Report
                </button>
              </div>
            </div>
          </div>
        `;
      }

      app.innerHTML = content;

      // Setup event listeners after render
      if (state.stage === 'namedate') {
        const nameInput = document.getElementById('name-input');
        const dateInput = document.getElementById('date-input');
        const continueBtn = document.getElementById('continue-btn');

        nameInput.addEventListener('input', (e) => {
          state.name = e.target.value;
          continueBtn.disabled = !state.name || !state.reportDate;
        });

        dateInput.addEventListener('input', (e) => {
          state.reportDate = e.target.value;
          continueBtn.disabled = !state.name || !state.reportDate;
        });

        continueBtn.addEventListener('click', () => {
          state.stage = 'department';
          render();
        });

        continueBtn.disabled = !state.name || !state.reportDate;
      }

      if (state.stage === 'questions') {
        setupInputListeners();
        const submitBtn = document.getElementById('submit-btn');
        if (submitBtn) {
          submitBtn.disabled = !isFormValid() || state.isSubmitting;
        }
      }
    }

    // Initial render
    render();
  </script>
</body>
</html>